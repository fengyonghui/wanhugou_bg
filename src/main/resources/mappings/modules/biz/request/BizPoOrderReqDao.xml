<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wanhutong.backend.modules.biz.dao.request.BizPoOrderReqDao">
    
	<sql id="bizPoOrderReqColumns">
		a.so_id AS "soId",
		a.po_id AS "poHeader.id",
		a.so_line_no AS "soLineNo",
		so_qty AS "soQty",
		so_type AS "soType",
		po_line_no AS "poLineNo",
		status AS "delFalg",
		create_id AS "createBy.id",
		create_time AS "createDate",
		u_version AS "uVersion",
		update_id AS "updateBy.id",
		update_time AS "updateDate"
	</sql>
	
	<sql id="bizPoOrderReqJoins">
	</sql>
    
	<select id="get" resultType="BizPoOrderReq">
		SELECT 
			<include refid="bizPoOrderReqColumns"/>
		FROM biz_po_order_req a
		<include refid="bizPoOrderReqJoins"/>
		WHERE a.id = #{id}
	</select>
	
	<select id="findList" resultType="BizPoOrderReq">
		SELECT 
			<include refid="bizPoOrderReqColumns"/>
		FROM biz_po_order_req a
		<include refid="bizPoOrderReqJoins"/>
		<where>
			
			<if test="orderHeader != null and orderHeader.id != null and orderHeader.id != ''">
				AND a.so_id = #{orderHeader.id}
			</if>
			<if test="requestHeader != null and requestHeader.id != null and requestHeader.id != ''">
				AND a.so_id = #{requestHeader.id}
			</if>
			<if test="poHeader != null and poHeader.id != null and poHeader.id != ''">
				AND a.po_id = #{poHeader.id}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<select id="findAllList" resultType="BizPoOrderReq">
		SELECT 
			<include refid="bizPoOrderReqColumns"/>
		FROM biz_po_order_req a
		<include refid="bizPoOrderReqJoins"/>
		<where>
			
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<insert id="insert">
		INSERT INTO biz_po_order_req(
		so_id,
		so_line_no,
		so_qty,
		so_type,
		po_id,
		po_line_no,
		status,
		create_id,
		create_time,
		u_version,
		update_id,
		update_time
		) VALUES (
			<if test="orderHeader!=null and orderHeader.id !=null and orderHeader.id!=''">
				#{orderHeader.id},
			</if>
			<if test="requestHeader!=null and requestHeader.id!=null and requestHeader.id!=''">
				#{requestHeader.id},
			</if>
			#{soLineNo},
			#{soQty},
			#{soType},
			#{poHeader.id},
			#{poLineNo},
			#{delFlag},
			#{createBy.id},
			#{createDate},
			#{uVersion},
			#{updateBy.id},
			#{updateDate}
		)
	</insert>
	
	<update id="update">
		UPDATE biz_po_order_req SET
		<if test="orderHeader!=null and orderHeader.id !=null and orderHeader.id!=''">
			so_id=#{orderHeader.id},
		</if>
		<if test="requestHeader!=null and requestHeader.id!=null and requestHeader.id!=''">
			so_id=#{requestHeader.id},
		</if>
		so_line_no=#{soLineNo},
		so_qty=#{soQty},
		so_type=#{soType},
		po_lineNo=#{poLineNo},
		po_id = #{poHeader.id},
		u_version=#{uVersion},
		update_id=#{updateBy.id},
		update_time=#{updateDate}
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM biz_po_order_req
		WHERE id = #{id}
	</update>
	
</mapper>